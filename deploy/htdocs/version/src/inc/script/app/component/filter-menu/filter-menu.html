<div class="component-filter-menu overrule-overlap" data-bind="with: data">

	<!-- ko if: $root.filters() -->
	<div class="menu">

		<button class="filter-label button" data-bind="css: {'is-disabled': !$root.filterChanged()}, tap: ($root.filterChanged() ? $root.applyFilter.bind($root) : null)">

			<!-- ko ifnot: $root.filterChanged() -->
				<!-- ko text: label --><!-- /ko -->
				<span class="icon" data-bind="icon: 'filter'"></span>

			<!-- /ko -->


			<!-- ko if: $root.filterChanged() -->
				<!-- ko text: applyLabel --><!-- /ko -->
			<!-- /ko -->
		</button>

		<ul class="filters" data-bind="foreach: filters">

			<li class="filter-item">

				<button class="filter-button button" data-bind="tap: $root.handleDropdownClick.bind($root, $index())">
					<span class="label" data-bind="html: label"></span>

					<!-- ko template: {
						name: 'button-select-anchor',
						data: {
							direction: $root.Direction.DOWN
						}
					} --><!-- /ko -->

					<!-- ko if: $root.selectedFiltersOptionCount()[$index()] -->
						<div class="selected-tags-indicator" data-bind="html: $root.selectedFiltersOptionCount()[$index()]"></div>
					<!-- /ko -->

				</button>

				<div class="filter-dropdown">
					<div class="inner-content" data-bind="foreach: $root.filters()[$index()]">
						<label class="tag-checkbox custom-checkbox" data-bind="attr: {'for': value}">
							<input class="abs-fill" type="checkbox" name="{{value}}" id="{{value}}" value="" data-bind="checked: checked"/>
							<div class="element">{{label}}</div>
						</label>
					</div>

					<!-- ko component: {
						name: 'button/button-circle-close',
						onComplete: $root.controller.callbackCounter.get(),
						options: {
							action: {
								event: $root.handleCloseDropdownClick.bind($root, $index())
							},
							size: $root.ButtonSize.SMALL
						}
					} --><!-- /ko -->
				</div>
			</li>
		</ul>
	</div>

	<div class="filter-overlay" data-bind="css: {'is-open': $root.filterOverlayIsOpen()}">

		<div class="filter-overlay-content">

			<!-- ko component: {
				name: 'button/button-circle-close',
				onComplete: $root.controller.callbackCounter.get(),
				options: {
					action: {
						event: $root.toggleFilterOverlay.bind($root)
					},
					size: $root.ButtonSize.LARGE
				}
			} --><!-- /ko -->

			<div class="scroll-wrapper js-scroll-wrapper" data-bind="scrollbar:{
				setContentSize:false
				}">
				<div class="scroll-content" data-scroll-content>
					<div class="panel-inner-content" data-content-inner>

						<!-- ko foreach: filters -->
						<div class="filter-overlay-group">
							<span class="label" data-bind="html: label"></span>

							<div class="filter-overlay-tags" data-bind="foreach: $root.filters()[$index()]">

								<label class="tag-checkbox custom-checkbox" data-bind="attr: {'for': value + '_mobile'}">
									<input class="abs-fill" type="checkbox" name="{{value + '_mobile'}}" id="{{value + '_mobile'}}" value="" data-bind="checked: checked"/>
									<div class="element">{{label}}</div>
								</label>
							</div>

						</div>
						<!-- /ko -->
					</div>
				</div>

				<div class="scroll-bar" data-scroll-bar><div class="knob" data-scroll-knob></div></div>
			</div>
		</div>

		<button class="filter-label button" data-bind="tap: $root.handleFilterOverlayLabelClick.bind($root)">
			<!-- ko text: label --><!-- /ko -->
			<span class="icon" data-bind="icon: 'filter'"></span>
		</button>

	</div>
	<!-- /ko -->
</div>
