<div class="component-block-market-map" data-bind="with: data">

	<div class="map-box abs-fill" id="js-map"></div>

	<div class="zoom-actions">
		<!-- ko component: {
			name: 'button/button-circle-icon',
			options: {
				'icon': 'plus',
				'action': {
					event: $root.handleZoomInClick.bind($root),
					label: 'Zoom in',
					title: 'Zoom in'
				}
			}
		} --><!-- /ko -->
		<!-- ko component: {
			name: 'button/button-circle-icon',
			options: {
				'icon': 'minus',
				'action': {
					event: $root.handleZoomOutClick.bind($root),
					label: 'Zoom in',
					title: 'Zoom in'
				}
			}
		} --><!-- /ko -->
	</div>

	<div class="selected-value copy-03" data-bind="
		css: {
			'has-value': $root.selectedState(),
			'is-open': $root.sidePanelIsOpen()
		},
		tap: $root.toggleSidePanel.bind($root)
	">
		<!-- ko if: $root.selectedState() -->
			{{ $root.selectedState().value }}
		<!-- /ko -->

		<!-- ko ifnot: $root.selectedState() -->
			{{lt:global.form.select.state}}
		<!-- /ko -->
	</div>

	<div class="side-panel" data-bind="css: {'is-open': $root.sidePanelIsOpen()}">
		<div class="scroll-wrapper js-scroll-wrapper" data-bind="scrollbar:{
			setContentSize:false
		}">
			<div class="scroll-content" data-scroll-content>
				<div class="scroll-content-inner" data-content-inner>
					<ul class="filter-list" data-bind="foreach: $root.stateList()">
						<li class="filter-list-item copy-03" data-bind="css: {'is-active': $root.selectedState() === $data }, tap: $root.onStateSelect.bind($root, $data)">
							{{$data.city}}, {{$data.statePostalCode}}
						</li>
					</ul>
				</div>
			</div>

			<div class="scroll-bar" data-scroll-bar>
				<div class="knob" data-scroll-knob></div>
			</div>
		</div>

		<button class="service-info button" data-bind="tap: $root.handleServiceClick.bind($root)">
			<div class="profile-image bg-cover" data-bind="image: {
				image: service.image,
				state: $root.deviceState()
			}"></div>

			<div class="profile-info">
				<p class="name copy-02 copy" data-bind="html: service.name"></p>
				<p class="role copy" data-bind="html: service.role"></p>
			</div>

			<!-- ko template: {
				name: 'button-select-anchor',
				data: {
					direction: $root.Direction.RIGHT
				}
			} --><!-- /ko -->
		</button>
	</div>

	<form class="search-bar" data-bind="submit: $root.handleSubmit.bind($root)">
		<div class="input-text-main input-text large">
			<input type="text" name="search" id="search" autocomplete="off" data-bind="
			live: $root.searchQuery,
			focusBorder: {
				value: $root.searchQuery
			}"/>
			<span class="placeholder-label">Which region do you want to advertise in?</span>
			<span class="focus-border"></span>

			<!-- ko with: $root.autoCompleteValue() -->
				<button class="button auto-complete" data-bind="events: [
					[$root.MouseEventHelper.CLICK, $root.handleAutoCompleteClick.bind($root, $data)]
				]">
					{{$data.city}}, {{$data.statePostalCode}}
				</button>
			<!-- /ko -->

		</div>
		<button class="button-search button" data-bind="html: searchLabel" type="submit"></button>
	</form>

	<button class="service-info button" data-bind="tap: $root.handleServiceClick.bind($root)">
		<div class="profile-image bg-cover" data-bind="image: {
				image: service.image,
				state: $root.deviceState()
			}"></div>

		<div class="profile-info">
			<p class="name copy-02 copy" data-bind="html: service.name"></p>
			<p class="role copy" data-bind="html: service.role"></p>
		</div>

		<!-- ko template: {
			name: 'button-select-anchor',
			data: {
				direction: $root.Direction.RIGHT
			}
		} --><!-- /ko -->
	</button>
</div>
