uuid: 13314aed-f313-49db-8ddf-5ae69ddd1ea5
langcode: en
status: true
dependencies: {  }
_core:
  default_config_hash: fpgYp5IFuMsMRuenuNQgy2NAkb_PqqwiCrEQXM0eyBQ
id: markets
class: null
field_plugin_method: null
cck_plugin_method: null
migration_tags: null
migration_group: migrate_markets_map_csv
label: 'CSV feed of markets'
source:
  plugin: spectrum_csv
  path: markets_map.csv
  delimiter: ','
  header_row_count: 1
  keys:
    - DMAcode
  column_names:
    -
      State: State
    -
      DMAcode: 'DMA Code'
    -
      DMArank: 'DMA Rank'
    -
      DMAname: 'DMA Name'
    -
      DMAvideo: 'DMA Video'
    -
      Households: Households
    -
      Markets: Markets
    -
      States: States
    -
      partners_logos: 'Partners logos'
    -
      Democomp: 'Demographic Composition'
    -
      Devices_desk: 'Devices Desktop'
    -
      Devices_smart: 'Devices Smartphone'
    -
      Devices_tab: 'Devices Tablet'
    -
      Gender_male: 'Gender Male'
    -
      Gender_female: 'Gender Female'
    -
      Education_no: 'Education No college'
    -
      Education_undergrad: 'Education Undergrad'
    -
      Education_grad: 'Education Grad+'
    -
      Home_own: 'Home Own'
    -
      Home_rent: 'Home Rent'
    -
      Parenting_kids: 'Parenting Have Kids'
    -
      Parenting_nokids: 'Parenting No Kids'
    -
      Age_18: 'Age <18'
    -
      Age_1824: 'Age 18-24'
    -
      Age_2534: 'Age 25-34'
    -
      Age_3544: 'Age 35-44'
    -
      Age_4554: 'Age 45-54'
    -
      Age_5564: 'Age 55-64'
    -
      Age_65: 'Age 65+'
    -
      Income_0_50: 'Income 0-50'
    -
      Income_50_100: 'Income 50-100'
    -
      Income_100_150: 'Income 100-150'
    -
      Income_150: 'Income 150+'
    -
      Network_logos: 'Network Logos'
    -
      TopNetwork_logos: 'Top Network Logos'
    -
      Free_text: 'Free text'
    -
      Partners_logos_text: 'Partners logos text'
process:
  title: DMAname
  field_market_state_code: State
  field_market_dma_code:
    plugin: skip_on_empty_null
    method: process
    source: DMAcode
    message: 'Field field_name is missing'
  field_market_dma_rank:
    plugin: skip_on_empty_null
    method: process
    source: DMArank
    message: 'Field field_name is missing'
  field_market_dma_name:
    plugin: skip_on_empty_null
    method: process
    source: DMAname
    message: 'Field field_name is missing'
  field_market_dma_video:
    plugin: skip_on_empty_null
    method: process
    source: DMAvideo
    message: 'Field field_name is missing'
  field_market_partners_logos:
    -
      plugin: skip_on_empty_null
      method: process
      source: partners_logos
      message: 'Field field_name is missing'
    -
      plugin: explode
      delimiter: ','
      source: partners_logos
  field_market_households:
    -
      plugin: skip_on_empty_null
      method: process
      source: Households
      message: 'Field field_name is missing'
    -
      plugin: remove_comma_from_thousands
  field_market_states:
    plugin: skip_on_empty_null
    method: process
    source: States
    message: 'Field field_name is missing'
  field_market_markets:
    plugin: skip_on_empty_null
    method: process
    source: Markets
    message: 'Field field_name is missing'
  field_market_media_kit:
    plugin: skip_on_empty_null
    method: process
    source: Mediakit
    message: 'Field field_name is missing'
  field_market_demog_composition/target_id:
    -
      plugin: skip_on_empty_null
      method: process
      source: Democomp
      message: 'Field field_name is missing'
    -
      plugin: file_json
      destination: 'public://markets/[date:custom:Y]-[date:custom:m]'
  field_market_devices_desktop:
    plugin: skip_on_empty_null
    method: process
    source: Devices_desk
    message: 'Field field_name is missing'
  field_market_devices_smartphone:
    plugin: skip_on_empty_null
    method: process
    source: Devices_smart
    message: 'Field field_name is missing'
  field_market_devices_tablet:
    plugin: skip_on_empty_null
    method: process
    source: Devices_tab
    message: 'Field field_name is missing'
  field_market_gender_male:
    plugin: skip_on_empty_null
    method: process
    source: Gender_male
    message: 'Field field_name is missing'
  field_market_gender_female:
    plugin: skip_on_empty_null
    method: process
    source: Gender_female
    message: 'Field field_name is missing'
  field_market_edu_no_college:
    plugin: skip_on_empty_null
    method: process
    source: Education_no
    message: 'Field field_name is missing'
  field_market_edu_undergrad:
    plugin: skip_on_empty_null
    method: process
    source: Education_undergrad
    message: 'Field field_name is missing'
  field_market_edu_grad_plus:
    plugin: skip_on_empty_null
    method: process
    source: Education_grad
    message: 'Field field_name is missing'
  field_market_home_own:
    plugin: skip_on_empty_null
    method: process
    source: Home_own
    message: 'Field field_name is missing'
  field_market_home_rent:
    plugin: skip_on_empty_null
    method: process
    source: Home_rent
    message: 'Field field_name is missing'
  field_market_parent_have_kids:
    plugin: skip_on_empty_null
    method: process
    source: Parenting_kids
    message: 'Field field_name is missing'
  field_market_parent_no_kids:
    plugin: skip_on_empty_null
    method: process
    source: Parenting_nokids
    message: 'Field field_name is missing'
  field_market_ages_lower_18:
    plugin: skip_on_empty_null
    method: process
    source: Age_18
    message: 'Field field_name is missing'
  field_market_ages_18_24:
    plugin: skip_on_empty_null
    method: process
    source: Age_1824
    message: 'Field field_name is missing'
  field_market_ages_25_34:
    plugin: skip_on_empty_null
    method: process
    source: Age_2534
    message: 'Field field_name is missing'
  field_market_ages_35_44:
    plugin: skip_on_empty_null
    method: process
    source: Age_3544
    message: 'Field field_name is missing'
  field_market_ages_45_54:
    plugin: skip_on_empty_null
    method: process
    source: Age_4554
    message: 'Field field_name is missing'
  field_market_ages_55_64:
    plugin: skip_on_empty_null
    method: process
    source: Age_5564
    message: 'Field field_name is missing'
  field_market_ages_65_plus:
    plugin: skip_on_empty_null
    method: process
    source: Age_65
    message: 'Field field_name is missing'
  field_market_income_0_50k:
    plugin: skip_on_empty_null
    method: process
    source: Income_0_50
    message: 'Field field_name is missing'
  field_market_income_50_100k:
    plugin: skip_on_empty_null
    method: process
    source: Income_50_100
    message: 'Field field_name is missing'
  field_market_income_100_150k:
    plugin: skip_on_empty_null
    method: process
    source: Income_100_150
    message: 'Field field_name is missing'
  field_market_income_plus_150k:
    plugin: skip_on_empty_null
    method: process
    source: Income_150
    message: 'Field field_name is missing'
  field_market_network_logos:
    -
      plugin: skip_on_empty_null
      method: process
      source: Network_logos
      message: 'Field field_name is missing'
    -
      plugin: explode
      source: Network_logos
      delimiter: ','
    -
      plugin: migration_lookup
      no_stub: true
      migration: network
  field_market_top_networks:
    -
      plugin: skip_on_empty_null
      method: process
      source: TopNetwork_logos
      message: 'Field field_name is missing'
    -
      plugin: explode
      source: TopNetwork_logos
      delimiter: ','
    -
      plugin: migration_lookup
      no_stub: true
      migration: network
  field_market_free_text:
    plugin: skip_on_empty_null
    method: process
    source: Free_text
    message: 'Field field_name is missing'
  field_market_ap_text:
    plugin: skip_on_empty_null
    method: process
    source: Partners_logos_text
    message: 'Field field_name is missing'
  type:
    plugin: default_value
    default_value: market
destination:
  plugin: 'entity:node'
migration_dependencies: null
